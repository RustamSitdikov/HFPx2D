cmake_minimum_required(VERSION 3.6)
project(HFPx2D)
set(CMAKE_CXX_STANDARD 11)
IF(CMAKE_BUILD_TYPE MATCHES DEBUG)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Werror -Wall -Wextra -pedantic")
ENDIF(CMAKE_BUILD_TYPE MATCHES DEBUG)
set(SOURCE_FILES main.cpp Elasticity2D.cpp Elasticity2D.h Mesh.cpp Mesh.h DOF_Handles.h DOF_Handles.cpp AssemblyDDM.cpp AssemblyDDM.h Friction.cpp Friction.h Dilatancy.cpp Dilatancy.h FromEdgeToCol.cpp FromEdgeToCol.h FVM.cpp FVM.h ConductivitiesNewtonian.cpp ConductivitiesNewtonian.h TimeIncr.cpp TimeIncr.h Output_results.h il/io/toml.cpp MC_criterion.cpp MC_criterion.h EHLDs.cpp EHLDs.h InputData.toml Permeability.cpp Permeability.h)
link_directories($ENV{MKLROOT}/lib $ENV{MKLROOT}/../compiler/lib)
add_executable(HFPx2D ${SOURCE_FILES})
target_compile_definitions(HFPx2D PRIVATE IL_MKL=1 IL_BLAS=1)
target_include_directories(HFPx2D PRIVATE ${CMAKE_SOURCE_DIR} $ENV{MKLROOT}/include)
target_link_libraries(HFPx2D mkl_intel_lp64 mkl_core mkl_intel_thread dl iomp5 pthread m)
